#!/usr/bin/env ruby

class Song

LEXICON = [
  {thing: 'the house', action: 'that Jack built'},
  {thing: 'the malt', action: 'that lay in'},
  {thing: 'the rat', action: 'that ate'},
  {thing: 'the cat', action: 'that killed'},
  {thing: 'the dog', action: 'that worried'},
  {thing: 'the cow with the crumpled horn', action: 'that tossed'},
  {thing: 'the maiden all forlorn', action: 'that milked'},
  {thing: 'the man all tattered and torn', action: 'that kissed'},
  {thing: 'the priest all shaven and shorn', action: 'that married'},
  {thing: 'the rooster that crowed in the morn', action: 'that woke'},
  {thing: 'the farmer sowing his corn', action: 'that kept'},
  {thing: 'the horse and the hound and the horn', action: 'that belonged to'},
]

ACTIONS = [
  'the house that Jack built',
  'malt that lay in'
]

  def intro
    'This is'
  end

  def descriptive_thing(verse)
    ACTIONS[verse]
  end

  def chant(verse=1)
    n=verse-1
    song = "#{intro} #{descriptive_thing(n)}.\n\n"
    song
  end

  def sing

puts """#{line(0)}

#{line(1)}

#{line(2)}

#{line(3)}

#{line(4)}

#{line(5)}

#{line(6)}

#{line(7)}

#{line(8)}

#{line(9)}

#{line(10)}

#{line(11)}

"""
  end

  def line(verse)
    line = 'This is'
    verse.downto(0).each do |n|
      stanza = LEXICON[n]
      line = line + " #{stanza[:thing]} #{stanza[:action]}"
    end
    "#{line}."
  end

end


Song.new.sing

