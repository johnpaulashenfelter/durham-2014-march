#!/usr/bin/env ruby

class Song

LEXICON = [
  {thing: 'the house that Jack built'},
  {thing: 'the malt that lay in'},
  {thing: 'the rat that ate'},
  {thing: 'the cat that killed'},
  {thing: 'the dog that worried'},
  {thing: 'the cow with the crumpled horn that tossed'},
  {thing: 'the maiden all forlorn that milked'},
  {thing: 'the man all tattered and torn that kissed'},
  {thing: 'the priest all shaven and shorn that married'},
  {thing: 'the rooster that crowed in the morn that woke'},
  {thing: 'the farmer sowing his corn that kept'},
  {thing: 'the horse and the hound and the horn that belonged to'},
]

  def sing
    out = ''
    0.upto(11) do |n|
      out = out + "#{line(n)}\n\n"
    end
    puts out
  end

  def line(verse)
    line = 'This is'
    verse.downto(0).each do |n|
      stanza = LEXICON[n]
      line = line + " #{stanza[:thing]}"
    end
    "#{line}."
  end

end

Song.new.sing

